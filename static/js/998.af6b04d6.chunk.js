"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[998],{48563:function(n,e,t){t.d(e,{GS:function(){return j},xB:function(){return w},ZP:function(){return K}});var r=t(1413),i=t(29439),o=t(72791),a=t.p+"static/media/earth-night.da273783100dfbfd07c0.jpg",c=t.p+"static/media/earth-blue-marble.7deee995d548fe65faff.jpg",l=t(36431),u=t(15392),s=t(36314),d=t(43146),f=t(31857),h=t(5849),v=(t(26719),t(53329)),g=t(74165),b=t(15861),p=(t(88063),function(){var n=(0,b.Z)((0,g.Z)().mark((function n(e,t){var r,i,o,a;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.renderer(),i=e.scene(),o=e.camera(),r.render(i,o),a=r.domElement.toDataURL(),m(a,t);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),m=function(n,e){var t=window.document.createElement("a");t.style="display:none;",t.download=e,t.href=n,document.body.appendChild(t),t.click(),document.body.removeChild(t),t.remove()},x=p,Z=t(35585),y=t(42419),C=t(13967),k=t(80184),j=20,w=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],S=u.BYU().range([.01,.7]),E=u.BYU().range([.3,.4]),R=u.BYU().range([.1,1]),B=(0,o.forwardRef)((function(n,e){var t=n.locs,g=n.countries,b=n.width,p=n.height,m=n.onSelect,B=n.onSelectLegend,K=n.getSwitchView,I=n.zoomLoc,L=(n.toolbarRef,(0,o.useRef)()),D=(0,o.useRef)(),P=(0,o.useState)("country"),V=(0,i.Z)(P,2),z=V[0],M=(V[1],(0,o.useState)()),T=(0,i.Z)(M,2),A=T[0],_=T[1],O=(0,o.useState)(0),U=(0,i.Z)(O,2),W=U[0],Y=U[1],F=(0,o.useState)([{lat:-92.52824601944323,lng:38.31079101844495,altitude:1.8},{lat:51.58421865,lng:45.9571029,altitude:1.8},{lat:31.3037101,lng:-89.29276214,altitude:1.8},{lat:33.5842591,lng:-101.8804709,altitude:1.8}]),G=(0,i.Z)(F,2),H=G[0],N=G[1],X=(0,o.useState)([]),$=(0,i.Z)(X,2),q=$[0],J=$[1],Q=(0,o.useState)({}),nn=(0,i.Z)(Q,2),en=(nn[0],nn[1]),tn=(0,C.Z)(),rn=(0,o.useMemo)((function(){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ececec",e=u.PKp(w),t=function(t){if(!t||""===t||""===t.trim)return"black";var r=e.domain();return r.find((function(n){return n===t}))||r.length<j?e(t):n};return t.domain=e.domain,t.range=e.range,t}()}),[]);function on(n){var e=n.locs,t=n.countries;console.log(e,t);var r={},i=u.Wem(e,(function(n){return null===n||void 0===n?void 0:n.count}));S.domain(i),E.domain(i),R.domain(u.Wem(t,(function(n){return r[n.title]=n,null===n||void 0===n?void 0:n.count}))),rn.domain([]).range(w),t.forEach((function(n){return rn(n.title)}));var o=0;return t.length>3&&[0,1,2,3,0].forEach((function(n){H[o]||(H[o]={lat:0,lng:0,altitude:1}),H[o].lat=t[n].lat,H[o].lng=t[n].long,o++})),{MAP_CENTERs:H,contriesMap:r}}(0,o.useEffect)((function(){var n=on({locs:t,countries:g}),e=n.MAP_CENTERs,r=n.contriesMap;en(r),N(e),I||Y(0)}),[t,g]);var an=(0,o.useState)(null),cn=(0,i.Z)(an,2),ln=cn[0],un=cn[1];(0,o.useEffect)((function(){if(L.current&&W<H.length){var n=setTimeout((function(){L.current.pointOfView(H[W],4e3),Y(W+1)}),4e3);return un(n),function(){clearInterval(n)}}}),[W,H]);var sn=(0,o.useCallback)((function(){ln&&clearInterval(ln),Y(H.length)}),[ln]),dn=(0,o.useState)(null),fn=(0,i.Z)(dn,2),hn=fn[0],vn=fn[1],gn=(0,o.useCallback)((function(n,e){if(L.current){sn(),L.current.pointOfView({lat:e,lng:n,altitude:2},2e3),J([{lng:n,lat:e}]),hn&&clearInterval(hn);var t=setTimeout((function(){J([])}),1e4);vn(t)}}),[W,sn,hn]);(0,o.useEffect)((function(){return I&&gn(I.lng,I.lat),function(){hn&&clearInterval(hn)}}),[I]);var bn=(0,o.useCallback)((function(){x(L.current,"MIRAGE-mc")}),[D,L]);(0,o.useEffect)((function(){B("selectCountry",(function(n){m({country:[n.title]}),gn(n.long,n.lat)}))}),[gn,m]);var pn=(0,o.useCallback)((function(){if(L.current){var n=(0,r.Z)({},L.current.pointOfView());n.altitude=n.altitude/2,L.current.pointOfView(n,2e3)}}),[L]),mn=(0,o.useCallback)((function(){if(L.current){var n=(0,r.Z)({},L.current.pointOfView());n.altitude=2*n.altitude,L.current.pointOfView(n,2e3)}}),[L]);return(0,k.jsxs)("div",{style:{background:"#ffffff",position:"relative"},children:[(0,k.jsx)("div",{ref:D,style:{},children:(0,k.jsx)(l.Z,{width:b,height:p,ref:L,globeImageUrl:"dark"===tn.palette.mode?a:c,backgroundColor:"dark"===tn.palette.mode?"black":"#7ec7f6",showAtmosphere:!0,ringsData:q,ringColor:function(){return"#D39F49"},ringResolution:1e3,ringMaxRadius:5,ringPropagationSpeed:5,ringRepeatPeriod:500,labelsData:g,labelLat:(0,o.useCallback)((function(n){return n.lat}),[]),labelLng:(0,o.useCallback)((function(n){return n.long}),[]),labelAltitude:(0,o.useCallback)((function(n){return A&&A.country===n.title?.05:.02}),[A]),labelText:(0,o.useCallback)((function(n){return n.title}),[]),labelSize:(0,o.useCallback)((function(n){return A&&A.country===n.title?1:E(null===n||void 0===n?void 0:n.count)}),[A]),labelDotRadius:0,labelColor:(0,o.useCallback)((function(n){var e;return null!==(e=n.color)&&void 0!==e?e:"white"}),[A]),labelResolution:2,hexBinPointsData:t,hexBinPointWeight:"count",hexBinPointLng:(0,o.useCallback)((function(n){return n.long}),[]),hexBinPointLat:(0,o.useCallback)((function(n){return n.lat}),[]),hexAltitude:(0,o.useCallback)((function(n){return S(n.sumWeight)}),[]),hexBinResolution:4,hexTopColor:(0,o.useCallback)((function(n){return rn(n.points[0][z])}),[]),hexSideColor:(0,o.useCallback)((function(n){return rn(n.points[0][z])}),[]),hexBinMerge:!1,onHexHover:(0,o.useCallback)((function(n){_(n?n.points[0]:void 0)}),[]),hexLabel:(0,o.useCallback)((function(n){return'<div class="overlay-holder">\n            <div class="overlay-header">\n                <span><b>'.concat(u.Smz(n.points,(function(n){return null===n||void 0===n?void 0:n.count})),'</b> stations</span>\n            </div>\n            <div class="overlay-content">\n            <table>\n                <tbody><tr>').concat(n.points.slice().sort((function(n,e){return(null===e||void 0===e?void 0:e.count)-(null===n||void 0===n?void 0:n.count)})).map((function(n){return"<td>[".concat(null===n||void 0===n?void 0:n.count,"]</td><td>").concat(n.title,"</td>")})).join("</tr><tr>"),"</tr></tbody>\n            </table>\n            </div>\n          </div>")}),[]),onHexClick:function(n){var e,t=[];n.points.forEach((function(n){t.push(n.city)})),m({city:t,country:[null===(e=n.points[0])||void 0===e?void 0:e.country]})},onGlobeClick:sn})}),(0,k.jsxs)(s.Z,{sx:{position:"absolute",right:0,top:0,margin:1},direction:"row",children:[(0,k.jsx)("div",{children:(0,k.jsx)(d.Z,{value:"check",selected:K(),onChange:function(){var n=K();K(!n)},children:K()?"Full data":"Demo data"})}),(0,k.jsxs)(f.Z,{orientation:"vertical","aria-label":"map tool",variant:"contained",sx:{"& button":{padding:1}},children:[(0,k.jsx)(h.Z,{onClick:bn,children:(0,k.jsx)(v.Z,{})}),(0,k.jsx)(h.Z,{onClick:pn,children:(0,k.jsx)(y.Z,{})}),(0,k.jsx)(h.Z,{onClick:mn,children:(0,k.jsx)(Z.Z,{})})]})]})]})})),K=B},78305:function(n,e,t){t.d(e,{XU:function(){return c},dS:function(){return l},eb:function(){return u}});t(72426);var r=t(13034),i=t(90462),o=t(32588),a=t(80184),c=[{id:"inBasket",header:"Selected",accessorKey:"inBasket",Cell:function(n){n.renderedCellValue;var e=n.row;return(0,a.jsx)(r.Z,{disabled:!0,size:"small",icon:(0,a.jsx)(i.Z,{}),checkedIcon:(0,a.jsx)(o.Z,{color:"secondary"}),checked:e.original.inBasket})},size:50,minSize:50,filterDisable:!0},{accessorKey:"city",header:"City"},{accessorKey:"country",header:"Country"},{accessorKey:"station",header:"Station",filterDisable:!0},{accessorKey:"station_genre",header:"Station Genre",Cell:function(n){var e=n.renderedCellValue;n.row;return(0,a.jsx)(a.Fragment,{children:(null!==e&&void 0!==e?e:[]).join(", ")})}},{accessorKey:"artist_name",header:"Artist",dynamic:!0},{accessorKey:"track_name",header:"Song",dynamic:!0}],l=c.filter((function(n,e){return e})),u=c.filter((function(n){return!n.filterDisable}))},5797:function(n,e,t){t.d(e,{Z:function(){return k}});var r=t(45987),i=t(1413),o=t(29439),a=t(72791),c=t(78687),l=t(49079),u=(t(69824),t(80915)),s=t(36314),d=t(93006),f=t(46314),h=t(78305),v=t(69173),g=t(77262),b=t(80184),p=["children","role"],m=a.forwardRef((function(n,e){var t=n.children,o=n.role,c=(0,r.Z)(n,p),l=Array.isArray(t)?t.length:0,u=(0,a.useRef)(null);return(0,b.jsx)("div",{ref:e,role:o,children:(0,b.jsx)("div",(0,i.Z)((0,i.Z)({},c),{},{ref:u,children:(0,b.jsx)(g.ViewportList,{viewportRef:u,items:t,count:l,children:function(n){var e=n.props,t=n.type;return(0,a.createElement)(t,(0,i.Z)((0,i.Z)({},e),{},{key:e.id}))}})}))})})),x=t(21809),Z=["onInputChange"],y=(0,u.D)(),C=function(n,e){return y(n,e).slice(0,50)};function k(){var n=(0,c.v9)(l.mj),e=(0,c.I0)(),t=(0,a.useState)({}),r=(0,o.Z)(t,2),u=r[0],f=r[1],g=(0,v.Wz)(),p=g.isLoading,Z=g.searchByStream,y=g.getList,k=(0,x.Tx)().logEvents,w=y("fields");return(0,a.useEffect)((function(){f((0,i.Z)({},w))}),[w]),(0,b.jsx)(s.Z,{spacing:2,padding:2,children:h.eb.map((function(t){var r,o;return(0,b.jsx)(j,{multiple:!0,size:"small",limitTags:2,filterOptions:C,ListboxComponent:m,freeSolo:!0,options:null!==(r=t.dynamic?y("search-".concat(t.accessorKey)):u[t.accessorKey])&&void 0!==r?r:[],loading:!!t.dynamic&&p("search-".concat(t.accessorKey)),getOptionLabel:function(n){return n},value:null!==(o=n[t.accessorKey])&&void 0!==o?o:[],onChange:function(n,r){""!==r&&r&&r.length&&k("search",{search_term:r,key:t.accessorKey}),e((0,l.Tv)({key:t.accessorKey,value:r}))},onInputChange:t.dynamic?function(n,e){e&&""!==e&&Z(t.accessorKey,e)}:void 0,renderInput:function(n){return(0,b.jsx)(d.Z,(0,i.Z)((0,i.Z)({},n),{},{label:t.header}))}},t.accessorKey)}))})}function j(n){var e=n.onInputChange,t=void 0===e?function(){}:e,c=(0,r.Z)(n,Z),l=a.useState(""),u=(0,o.Z)(l,2),s=u[0],d=u[1];return(0,b.jsx)(f.Z,(0,i.Z)({inputValue:s,onInputChange:function(n,e,r){d(e),t(n,e,r)},onBlur:function(){d("")}},c))}},7655:function(n,e,t){t.d(e,{Z:function(){return u}});var r=t(36314),i=t(31857),o=t(5849),a=t(68087),c=t(65370),l=t(80184);function u(n){var e=n.title,t=n.onChange;return(0,l.jsxs)(r.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e,(0,l.jsxs)(i.Z,{size:"small",variant:"outlined","aria-label":"outlined button group",sx:{color:"unset"},children:[(0,l.jsx)(o.Z,{sx:{color:"unset"},onClick:function(){return t(!0)},children:(0,l.jsx)(a.Z,{})}),(0,l.jsx)(o.Z,{sx:{color:"unset"},onClick:function(){return t(!1)},children:(0,l.jsx)(c.Z,{})})]})]})}},37041:function(n,e,t){t.d(e,{Z:function(){return h}});var r=t(72791),i=t(24308),o=t(36314),a=t(88588),c=t(4567),l=t(69173),u=t(26719),s=t(15392),d=t(48563),f=t(80184);function h(n){var e=n.countries,t=n.fullHeight,h=(0,l.Wz)(),v=h.getFuncCollection,g=(h.getList,(0,r.useMemo)((function(){return(0,s.BYU)().range([.1,1]).domain((0,s.Wem)(e,(function(n){return null===n||void 0===n?void 0:n.count})))}),[e])),b=(0,r.useMemo)((function(){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ececec",e=(0,s.PKp)(d.xB),t=function(t){if(!t||""===t||""===t.trim)return"black";var r=e.domain();return r.find((function(n){return n===t}))||r.length<d.GS?e(t):n};return t.domain=e.domain,t.range=e.range,t}()}),[e]);return(0,f.jsx)(i.Z,{children:(0,f.jsx)(o.Z,{m:1,style:{maxHeight:t?null:"30vh",overflowY:"auto"},children:(0,f.jsx)(a.Z,{sx:{pointerEvents:"all",overflowY:"auto",backgroundColor:function(n){return(0,u.x)(n.palette.background.paper)}},children:(0,f.jsxs)(o.Z,{sx:{m:1,p:0},children:[(0,f.jsx)(c.Z,{children:"Top Stations by Country"}),e.map((function(n){var e;return(0,f.jsxs)(c.Z,{variant:"subtitle2",onClick:function(){v("selectCountry")(n)},children:[(0,f.jsx)("div",{style:{width:50*(null!==(e=g(n.count))&&void 0!==e?e:1),height:10,backgroundColor:b(n.title),display:"inline-block",marginRight:5}}),n.title]},n.title)}))]})})})})}},26719:function(n,e,t){t.d(e,{x:function(){return a}});var r=t(1413),i=t(36395),o=t(15392);function a(n){var e=(0,o.$_Y)(n);return e.opacity=.5,e.toString()}e.Z=function(n,e,t,o,a){if(e)for(var c=0;c<e.length;c++)if(e[c].id===n){var l=e[c].source,u=null!=l&&l instanceof Function?l(t?"dark":"light",a):l,s=null!=u?u.palette:{};return(0,i.Z)((0,r.Z)((0,r.Z)({},u),{},{palette:(0,r.Z)((0,r.Z)({},s),{},{mode:t?"dark":"light"}),direction:o?"rtl":"ltr"}))}return(0,i.Z)({palette:{mode:t?"dark":"light"},direction:o?"rtl":"ltr"})}}}]);
//# sourceMappingURL=998.af6b04d6.chunk.js.map